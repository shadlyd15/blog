I"%<h2 id="what-is-nextcloud">What is Nextcloud</h2>
<p>Nextcloud is a suite of client-server software for creating cloud file storage. It is basically a free and open source version of google drive. It offers some really nice features. After Google announced that Google Photos will no longer allow unlimited photo storage at high-quality from June 1, 2021, I decided to give Nextcloud a try. Here I will be sharing my experience on how I built my own personal cloud storage with Nextcloud and Raspberry Pi 3 Model B.</p>

<h2 id="right-image-file-for-raspberry-pi-3-model-b">Right Image file for Raspberry Pi 3 Model B</h2>
<p>Nextcloud have a nice project called NextcloudPi for Raspberry Pi devices. At first I tried their official images from <a href="https://ownyourbits.com/downloads/">here</a> . But somehow they didn’t boot on my Raspberry Pi 3 Model B. So grabbed the source code from <a href="https://github.com/nextcloud/nextcloudpi">here</a> and built the img file for my device.</p>

<h2 id="build-nextcloudpi-for-raspberry-pi-3-model-b">Build NextcloudPi for Raspberry Pi 3 Model B</h2>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>apt-get <span class="nt">--allow-releaseinfo-change</span> update
git clone https://github.com/nextcloud/nextcloudpi.git
<span class="nb">cd </span>nextcloudpi
build/build-SD-rpi.sh
</pre></td></tr></tbody></table></code></pre></div></div>
<p>After the build is finished you will find the img file in the tmp folder. Write the image in your SD card.</p>

<h2 id="setting-up-nextcloud-on-raspberry-pi">Setting up Nextcloud on Raspberry Pi</h2>
<p>To connect to wifi, enable SSH and do other setting just type in</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>raspi-config
</pre></td></tr></tbody></table></code></pre></div></div>
<p>To install Nextcloud :</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>curl <span class="nt">-sSL</span> https://raw.githubusercontent.com/nextcloud/nextcloudpi/master/install.sh | <span class="nb">sudo </span>bash
</pre></td></tr></tbody></table></code></pre></div></div>
<p>This will take some time to download and install everything. 
After it is installed get the IP of your Raspberry Pi device and check if the IP is accessible from your local network.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>ifconfig
</pre></td></tr></tbody></table></code></pre></div></div>
<h2 id="access-through-untrusted-domain">Access through untrusted domain</h2>

<p><img src="/blog/img/untrusted_domain.png" alt="Untrusted Domain" /></p>

<p>After you reach your device form your browser you will most likely get this error. To get through this, you need to add trusted domain in your config.php file. Edit this file and add your device’s IP to the trusted domain list.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">sudo cd</span> ../../var/www/nextcloud/config
nano config.php
</pre></td></tr></tbody></table></code></pre></div></div>
<p>Now you can reach your Nextcloud.</p>

<h2 id="changing-default-password-of-the-nextcloud">Changing default password of the Nextcloud</h2>

<p>There is a nice text based interface tool for configuring NextcloudPi.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>ncp-config
</pre></td></tr></tbody></table></code></pre></div></div>
<p>Here you can enable the web interface if it is not already enabled. Change the password for the default user ‘ncp’. Now try to login to your cloud. If everything works fine you should be now able to login to your Nextcloud.</p>

<h2 id="add-your-external-usb-storage">Add your External USB Storage</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo mkdir</span> /media/USBdrive
</pre></td></tr></tbody></table></code></pre></div></div>
<p>Now you have to run the wizard from</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>https://your_raspi_ip:4443/wizard/
</pre></td></tr></tbody></table></code></pre></div></div>
<p>Navigate through the options and setup your external storage.</p>

<h2 id="enjoy-nextcloud">Enjoy Nextcloud</h2>

<p>Now enjoy your free unlimited cloud storage.</p>

<p><img src="/blog/img/nextcloud.png" alt="Nextcloud" /></p>
:ET